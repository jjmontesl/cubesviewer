/*! cubesviewer 03-05-2016 */
function cubesviewerOLD(){this._alerts=null,this.alerts=[],this.alert=function(a){alert("CubesViewer "+this.version+"\n\n"+a)},this.refresh=function(){$(document).trigger("cubesviewerRefresh")},this.getView=function(a){var b=a.toString();return b=0===b.indexOf("view")?b:"view"+b,b="#"===b[0]?b:"#"+b,$(b+" .cv-gui-viewcontent").data("cubesviewer-view")},this.changeCubesLang=function(a){this.options.cubesLang=""==a?null:a,this.refresh()},this.showInfoMessage=function(a,b){null==this._alerts&&(this._alerts=new Ractive({el:$("body")[0],append:!0,template:cvtemplates.alerts,partials:cvtemplates,data:{cv:this}})),void 0==b&&(b=5e3),this.alerts.push({text:a}),this._alerts.reset({cv:this})}}function cubesviewerViews(){this.showFatal=function(a,b){a.empty().append('<div class="ui-widget"><div class="ui-state-error ui-corner-all" style="padding: 0 .7em;"><p><span class="ui-icon ui-icon-alert" style="float: left; margin-right: .3em;"></span><strong>Error</strong><br/><br/>'+b+"</p></div></div>")},this.blockView=function(a,b){"undef"==b&&(b=null),$(a.container).block({message:b,fadeOut:200,onUnblock:function(){$(a.container).css("position","inherit")}})},this.blockViewLoading=function(a){this.blockView(a,'<span class="ajaxloader" title="Loading..." >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Loading</span>')},this.unblockView=function(a){$(a.container).unblock()},this.redrawView=function(a){$(document).trigger("cubesviewerViewDraw",[a])},this.onViewDraw=function(a,b){return b.state==cubesviewer.views.STATE_ERROR?(cubesviewer.views.showFatal(b.container,"An error has occurred. Cannot present view."),void a.stopImmediatePropagation()):void 0},this.serialize=function(a){return JSON.stringify(a.params)}}function cubesviewerViewCubeExplore(){this._drilldownSortFunction=function(a,b){var c=a.params.drilldown.slice(0);return b&&c.splice(0,0,a.params.xaxis),function(b,d){for(var e=0;e<c.length;e++){var f=a.cube.cvdim_dim(c[e]);if(1==f.is_flat){if(b[f.name]<d[f.name])return-1;if(b[f.name]>d[f.name])return 1}else for(var g=0;g<f.levels.length;g++){var h=f.name+"."+f.levels[g].name;if(!(h in b&&h in d))break;if(b[h]<d[h])return-1;if(b[h]>d[h])return 1}}return 0}},this.columnTooltipAttr=function(a){return function(b,c,d){return'title="'+a+" = "+c+'"'}},this._onTableSort=function(a){return function(b,c,d){a.cubesviewer.views.cube.explore.onTableSort(a,b,c,d)}},this._onTableResize=function(a){return function(b,c){a.cubesviewer.views.cube.explore.onTableResize(a,b,c)}},this.onTableResize=function(a,b,c){},this.onTableLoaded=function(a){},this.onTableSort=function(a,b,c,d,e){},this.defineColumnWidth=function(a,b,c){return c},this.defineColumnSort=function(a,b){return b}}function cubesviewerViewCubeDimensionFilter(){this.drawDimensionFilter=function(a,b){var c=a.cube.cvdim_parts(b);$(a.container).find(".cv-views-dimensionfilter-apply").button().click(function(){a.cubesviewer.views.cube.dimensionfilter.applyFilter(a,b)}),$(a.container).find(".cv-views-dimensionfilter-cancel").button().click(function(){a.dimensionFilter=null,$(a.container).find(".cv-view-dimensionfilter").remove()}),$(a.container).find("#cv-views-dimensionfilter-cols-"+a.id).buttonset(),$(a.container).find("#cv-views-dimensionfilter-col1-"+a.id).click(function(){a.cubesviewer.views.cube.dimensionfilter.drawDimensionValuesCols(a,1)}),$(a.container).find("#cv-views-dimensionfilter-col2-"+a.id).click(function(){a.cubesviewer.views.cube.dimensionfilter.drawDimensionValuesCols(a,2)}),$(a.container).find(".cv-views-dimensionfilter-selectall").button().click(function(){$(a.container).find(".cv-view-dimensionfilter-list").find(":checkbox").filter(":checked").trigger("click"),$(a.container).find(".cv-view-dimensionfilter-list").find(":checkbox:visible").trigger("click")}),$(a.container).find(".cv-views-dimensionfilter-selectnone").button().click(function(){$(a.container).find(".cv-view-dimensionfilter-list").find(":checkbox").filter(":checked").trigger("click")}),$(a.container).find(".cv-views-dimensionfilter-drill").button().click(function(){return cubesviewer.views.cube.explore.selectDrill(a,c.fullDrilldownValue,"1"),!1})},this.drawDimensionValues=function(a,b,c){$(a.container).find(".cv-view-dimensionfilter-list").empty(),a.cubesviewer.views.cube.dimensionfilter.updateFromCut(a,b)},this.searchDimensionValues=function(a,b){$(a.container).find(".cv-view-dimensionfilter-list").find("input").each(function(a,c){""==b||$(c).parent().text().toLowerCase().indexOf(b.toLowerCase())>=0?$(c).parents(".cv-view-dimensionfilter-item").first().show():$(c).parents(".cv-view-dimensionfilter-item").first().hide()})},this.updateFromCut=function(a,b){for(var c=a.cube.cvdim_parts(b),d=c.dimension.name+("default"!=c.hierarchy.name?"@"+c.hierarchy.name:""),e=!1,f=[],g=0;g<a.params.cuts.length;g++)if(a.params.cuts[g].dimension==d){e=a.params.cuts[g].invert,f=a.params.cuts[g].value.split(";");break}e&&$(a.container).find(".cv-view-dimensionfilter-cont .invert-cut").attr("checked","checked"),f.length>0&&$(a.container).find(".cv-view-dimensionfilter-list").find("input").each(function(a,b){for(var c=0;c<f.length;c++)$(b).attr("value")==f[c]&&$(b).attr("checked","checked")})},this.applyFilter=function(a,b){var c=a.cube.cvdim_parts(b),d=$(a.container).find(".cv-view-dimensionfilter-list").find("input:checked"),e=[];d.size()<$(a.container).find(".cv-view-dimensionfilter-list").find("input").size()&&$(a.container).find(".cv-view-dimensionfilter-list").find("input:checked").each(function(a,b){e.push($(b).attr("value"))});var f=$(a.container).find(".cv-view-dimensionfilter .invert-cut").is(":checked"),g=c.dimension.name+("default"!=c.hierarchy.name?"@"+c.hierarchy.name:"");cubesviewer.views.cube.explore.selectCut(a,g,e.join(";"),f)}}function cubesviewerViewCubeSeries(){this.drawTable=function(a,b){colNames.forEach(function(b){var c=null;$(a.cube.aggregates).each(function(a,d){return d.name==b?(c=d.label||d.name,!1):void 0}),c||$(a.cube.measures).each(function(a,d){return d.name==b?(c=d.label||ag.name,!1):void 0}),colLabels.push(c||b)})}}function cubesviewerViewCubeChart(){this.cubesviewer=cubesviewer,this.onViewCreate=function(a,b){$.extend(b.params,{charttype:"bars-vertical",chartoptions:{showLegend:!0}})},this.onViewDestroyed=function(a,b){b.cubesviewer.views.cube.chart.cleanupNvd3()},this.exportChart=function(a){cubesviewer.alert("Not implemented")},this.cleanupNvd3=function(){console.debug("WARNING! Cleanup function disabled: review.")},this.onViewDraw=function(a,b){b.cubesviewer.views.cube.chart.cleanupNvd3(),null!=b.cube&&($(b.container).find(".cv-view-toolbar").find(".cv-view-button-series").after('<button class="cv-view-button-chart" title="Chart" style="margin-right: 15px;"><span class="ui-icon ui-icon-image"></span></button>'),$(b.container).find(".cv-view-button-chart").button(),$(b.container).find(".cv-view-button-chart").click(function(){return b.cubesviewer.views.cube.chart.modeChart(b),!1}),$(b.container).find(".cv-view-button-chart").mouseenter(function(){$(".cv-view-menu").hide()}),"chart"==b.params.mode&&(b.cubesviewer.views.cube.chart.drawInfo(b),$(b.container).find(".cv-view-button-chart").button("option","disabled","true").addClass("ui-state-active"),b.cubesviewer.views.cube.chart.drawChartMenu(b),0==$(b.container).find(".cv-view-viewdata").children().size()&&$(b.container).find(".cv-view-viewdata").append("<h3>Series Chart</h3>"),b.cubesviewer.views.cube.chart.loadData(b)))},this.drawChartMenu=function(a){this.cubesviewer.views.cube.series.drawSeriesMenu(a);var b=$(".cv-view-menu-view",$(a.container));a.cube;b.prepend('<li><a href="#" onclick="return false;"><span class="ui-icon ui-icon-calculator"></span>Chart Type</a><ul style="width: 180px;"><li><a href="#" class="cv-view-chart-settype" data-charttype="pie">Pie</a></li><li><a href="#" class="cv-view-chart-settype" data-charttype="bars-vertical">Bars Vertical</a></li><li><a href="#" class="cv-view-chart-settype" data-charttype="lines">Lines</a></li><li><a href="#" class="cv-view-chart-settype" data-charttype="lines-stacked">Areas</a></li><li><a href="#" class="cv-view-chart-settype" data-charttype="radar">Radar</a></li></ul></li><div></div>'),b.append('<div></div><li><a href="#" class="cv-view-chart-toggle-legend"><span class="ui-icon ui-icon-script"></span>Toggle Legend</a></li>'),$(b).menu("refresh"),$(b).addClass("ui-menu-icons");a.cubesviewer.views.cube.chart;$(a.container).find(".cv-view-chart-toggle-legend").click(function(){return a.params.chartoptions.showLegend=!a.params.chartoptions.showLegend,a.cubesviewer.views.redrawView(a),!1}),$(a.container).find(".cv-view-chart-export").click(function(){return a.cubesviewer.views.cube.chart.exportChart(a),!1}),$(a.container).find(".cv-view-chart-settype").click(function(){return a.cubesviewer.views.cube.chart.selectChartType(a,$(this).attr("data-charttype")),!1})},this.modeChart=function(a){a.params.mode="chart",a.cubesviewer.views.redrawView(a)},this.selectChartType=function(a,b){a.params.charttype=b,a.cubesviewer.views.redrawView(a)},this.drawInfo=function(a){a.cubesviewer.views.cube.series.drawInfo(a)},this.loadData=function(a){if(null==a.params.yaxis)return void $("#"+a.id).find(".cv-view-viewdata").empty().append("<h3>Series Chart</h3><div><i>Cannot present chart: no <b>measure</b> has been selected.</i></div>");a.cubesviewer.views.blockViewLoading(a);var b=this.cubesviewer.views.cube.buildBrowserArgs(a,null!=a.params.xaxis?!0:!1,!1),c=new cubes.Browser(a.cubesviewer.cubesserver,a.cube),d=c.aggregate(b,a.cubesviewer.views.cube.chart._loadDataCallback(a));d.always(function(){a.cubesviewer.views.unblockView(a)})},this._loadDataCallback=function(a){var a=a;return function(b,c){$(a.container).find(".cv-view-viewdata").empty(),a.cubesviewer.views.cube.chart.drawChart(a,b)}},this.resizeChart=function(a,b){$(a.container).find("#seriesChart-"+a.id).find("svg").height(b),$(a.container).find("#seriesChart-"+a.id).find("svg").resize()},this.drawChart=function(a,b){if($(a.container).find(".cv-view-viewdata").empty(),0==b.cells.length)return void $(a.container).find(".cv-view-viewdata").empty().append("<h3>Series Chart</h3><div>Cannot present chart as no rows are returned by the current filtering, horizontal dimension, and drilldown combination.</div>");$(a.container).find(".cv-view-viewdata").css("width","99%"),$(a.container).find(".cv-view-viewdata").append('<h3>Series Chart</h3><div id="seriesChart-'+a.id+'"  ><div><svg style="height: 400px;" /></div><div style="font-size: 8px; float: right;"><a href="" class="cv-chart-height" data-chart-height="400" >Small</a> <a href="" class="cv-chart-height" data-chart-height="550" >Medium</a> <a href="" class="cv-chart-height" data-chart-height="700" >Tall</a></div></div>'),$(a.container).find(".cv-chart-height").click(function(b){b.preventDefault(),a.cubesviewer.views.cube.chart.resizeChart(a,$(this).attr("data-chart-height"))});var c=[],d=[],e=[],f=[];a.cubesviewer.views.cube.explore._sortData(a,b.cells,null!=a.params.xaxis?!0:!1),a.cubesviewer.views.cube.series._addRows(a,e,f,c,d,b),a.params.drilldown.length>0&&(c.splice(0,a.params.drilldown.length,"key"),$(e).each(function(b,c){for(var d=[],e=0;e<a.params.drilldown.length;e++)d.push(c["key"+e]);c.key=d.join(" / ")})),"bars-vertical"==a.params.charttype||"bars-vertical-stacked"==a.params.charttype?a.cubesviewer.views.cube.chart.drawChartBarsVertical(a,c,e,f):"lines"==a.params.charttype?a.cubesviewer.views.cube.chart.drawChartLines(a,c,e,f):"pie"==a.params.charttype?a.cubesviewer.views.cube.chart.drawChartPie(a,c,e,f):"lines-stacked"==a.params.charttype?a.cubesviewer.views.cube.chart.drawChartLines(a,c,e,f):"lines-cumulative"==a.params.charttype?a.cubesviewer.views.cube.chart.drawChartLinesCumulative(a,c,e,f):"radar"==a.params.charttype&&a.cubesviewer.views.cube.chart.drawChartRadar(a,c,e,f)},this.drawChartBarsVertical=function(a,b,c,d){var e=$("#seriesChart-"+a.id).find("svg").get(0),f=null!=a.params.xaxis?a.cube.cvdim_parts(a.params.xaxis).label:"None",g=[],h=(c.length,0);$(c).each(function(c,d){serie=[];for(var e=1;e<b.length;e++){var f=d[b[e]];void 0!=f?serie.push({x:b[e],y:f}):serie.push({x:b[e],y:0})}var i={values:serie,key:""!=d.key?d.key:a.params.yaxis};a.params["chart-disabledseries"]&&a.params["chart-disabledseries"].key==a.params.drilldown.join(",")&&(i.disabled=!!a.params["chart-disabledseries"].disabled[i.key]),g.push(i),h++}),g.sort(function(a,b){return a.key<b.key?-1:a.key>b.key?1:0}),chartOptions={delay:1200,groupSpacing:.1};var i=$.grep(a.cube.aggregates,function(b){return b.ref==a.params.yaxis})[0],j=cubesviewer.views.cube.columnFormatFunction(a,i);nv.addGraph(function(){var b;return b=nv.models.multiBarChart().showLegend(!!a.params.chartoptions.showLegend).margin({left:120}),a.params["chart-barsvertical-stacked"]&&b.stacked(a.params["chart-barsvertical-stacked"]),b.options(chartOptions),b.multibar.hideable(!0),b.xAxis.axisLabel(f).showMaxMin(!0),b.yAxis.tickFormat(function(a,b){return j(a)}),d3.select(e).datum(g).call(b),nv.utils.windowResize(b.update),b.dispatch.on("stateChange",function(b){a.params["chart-barsvertical-stacked"]=b.stacked,a.params["chart-disabledseries"]={key:a.params.drilldown.join(","),disabled:{}};for(var c=0;c<b.disabled.length;c++)a.params["chart-disabledseries"].disabled[g[c].key]=b.disabled[c]}),b})},this.drawChartLines=function(a,b,c,d){var e=$("#seriesChart-"+a.id).find("svg").get(0),f=null!=a.params.xaxis?a.cube.cvdim_parts(a.params.xaxis).label:"None",g=[],h=(c.length,0);$(c).each(function(c,d){serie=[];for(var e=1;e<b.length;e++)if(b[e]in d){var f=d[b[e]];serie.push({x:e,y:f})}else serie.push({x:e,y:0});var i={values:serie,key:""!=d.key?d.key:a.params.yaxis};a.params["chart-disabledseries"]&&a.params["chart-disabledseries"].key==a.params.drilldown.join(",")&&(i.disabled=!!a.params["chart-disabledseries"].disabled[i.key]),g.push(i),h++}),g.sort(function(a,b){return a.key<b.key?-1:a.key>b.key?1:0});var i=$.grep(a.cube.aggregates,function(b){return b.ref==a.params.yaxis})[0],j=cubesviewer.views.cube.columnFormatFunction(a,i);"lines-stacked"!=a.params.charttype?nv.addGraph(function(){var c=nv.models.lineChart().useInteractiveGuideline(!0).showLegend(!!a.params.chartoptions.showLegend).margin({left:120});return c.xAxis.axisLabel(f).tickFormat(function(a,c){return b[a]}),c.yAxis.tickFormat(function(a,b){return j(a)}),d3.select(e).datum(g).call(c),nv.utils.windowResize(c.update),c.dispatch.on("stateChange",function(b){a.params["chart-disabledseries"]={key:a.params.drilldown.join(","),disabled:{}};for(var c=0;c<b.disabled.length;c++)a.params["chart-disabledseries"].disabled[g[c].key]=b.disabled[c]}),c}):nv.addGraph(function(){var c=nv.models.stackedAreaChart().showLegend(!!a.params.chartoptions.showLegend).margin({left:130}).clipEdge(!0).useInteractiveGuideline(!0);return a.params["chart-stackedarea-style"]&&c.style(a.params["chart-stackedarea-style"]),c.xAxis.axisLabel(f).showMaxMin(!1).tickFormat(function(a,c){return b[a]}),c.yAxis.tickFormat(function(a,b){return j(a)}),d3.select(e).datum(g).call(c),nv.utils.windowResize(c.update),c.dispatch.on("stateChange",function(b){a.params["chart-stackedarea-style"]=b.style,a.params["chart-disabledseries"]={key:a.params.drilldown.join(","),disabled:{}};for(var c=0;c<b.disabled.length;c++)a.params["chart-disabledseries"].disabled[g[c].key]=b.disabled[c]}),c})},this.drawChartPie=function(a,b,c,d){var e=$("#seriesChart-"+a.id).find("svg").get(0),f=(null!=a.params.xaxis?a.cube.cvdim_parts(a.params.xaxis).label:"None",[]);if(b.length>2)return $("#"+a.id).find(".cv-view-viewdata").empty(),void $("#"+a.id).find(".cv-view-viewdata").append("<h3>Series Chart</h3><div><i>Cannot present a Pie Chart when more than one column is present.</i></div>");var g=(c.length,0);$(c).each(function(c,d){serie=[];var e=d[b[1]];if(void 0!=e&&e>0){var h={y:e,key:""!=d.key?d.key:b[0]};a.params["chart-disabledseries"]&&a.params["chart-disabledseries"].key==a.params.drilldown.join(",")&&(h.disabled=!!a.params["chart-disabledseries"].disabled[h.key]),f.push(h),g++}}),f.sort(function(a,b){return a.y<b.y?-1:a.y>b.y?1:0}),xticks=[];for(var h=1;h<b.length;h++)xticks.push([h-1,b[h]]);var i=$.grep(a.cube.aggregates,function(b){return b.ref==a.params.yaxis})[0],j=cubesviewer.views.cube.columnFormatFunction(a,i);nv.addGraph(function(){var b=nv.models.pieChart().x(function(a){return a.key}).y(function(a){return a.y}).showLegend(!!a.params.chartoptions.showLegend).labelType("percent");return b.valueFormat(function(a,b){return j(a)}),d3.select(e).datum(f).call(b),nv.utils.windowResize(b.update),b.dispatch.on("stateChange",function(b){a.params["chart-disabledseries"]={key:a.params.drilldown.join(","),disabled:{}};for(var c=0;c<b.disabled.length;c++)a.params["chart-disabledseries"].disabled[f[c].key]=b.disabled[c]}),b})},this.drawChartRadar=function(a,b,c,d){var e=$("#seriesChart-"+a.id).get(0);if(b.length<4)return $("#"+a.id).find(".cv-view-viewdata").empty(),void $("#"+a.id).find(".cv-view-viewdata").append("<h3>Series Chart</h3><div><i>Cannot present a Radar Chart when less than 3 data columns are present.</i></div>");var f=[];numRows=c.length,$(c).each(function(c,d){serie=[];for(var e=1;e<b.length;e++){var g=d[b[e]];void 0!=g?serie.push([e-1,g]):serie.push([e-1,0])}f.push({data:serie,label:""!=d.key?d.key:a.params.yaxis})}),f.sort(function(a,b){return a.label<b.label?-1:a.label>b.label?1:0}),xticks=[];for(var g=1;g<b.length;g++)xticks.push([g-1,b[g]]);$(e).height(350),a.flotrDraw=Flotr.draw(e,f,{HtmlText:!a.doExport,shadowSize:2,height:350,radar:{show:!0},mouse:{track:!0,relative:!0},grid:{circular:!0,minorHorizontalLines:!0},legend:{position:"se",backgroundColor:"#D2E8FF"},xaxis:{ticks:xticks},yaxis:{}})}}angular.module("bootstrapSubmenu",[]).directive("submenu",["$timeout",function(a){return{restrict:"A",link:function(b,c,d){a(function(){$(c).submenupicker()},250)}}}]),function(){var a={};a.map=function(a,b){for(var c=[],d=0;d<a.length;d++)c.push(b(a[d]));return c},a.filter=function(a,b){for(var c=[],d=0;d<a.length;d++)b(a[d])&&c.push(a[d]);return c},a.find=function(a,b){var c;if("[object Array]"===Object.prototype.toString.call(a)){for(c=0;c<a.length;c++)if(b(a[c]))return a[c]}else for(c in a)if(b(a[c]))return a[c];return null},a.indexOf=function(a,b){var c;if("[object Array]"===Object.prototype.toString.call(a)){for(c=0;c<a.length;c++)if(b(a[c]))return c}else for(c in a)if(b(a[c]))return c;return-1},a.isObject=function(a){return"[object Object]"===Object.prototype.toString.call(a)},a.isString=function(a){return"[object String]"===Object.prototype.toString.call(a)};var b=this,c={};c.Server=function(a){a?this.ajaxRequest=a:this.ajaxRequest=$.ajax,this._cube_list=[],this._cubes={}},c.Server.prototype.cubeinfo=function(a){if(cubeinfos=$.grep(this._cube_list,function(b){return b.name==a}),1!=cubeinfos.length)throw"Found "+cubeinfos.length+" cubes with name '"+a+"' in the cube list";return cubeinfos[0]},c.Server.prototype.ajaxRequest=function(a){throw"Must implement ajaxRequest for server to process jquery-style $.ajax settings object"},c.Server.prototype.query=function(a,b,c,d,e,f){var g={dataType:"json",type:"GET"};return b.hasOwnProperty("name")?cube_name=b.name:cube_name=b,g.url=this.url+"cube/"+cube_name+"/"+a,g.data=c,c&&c.cut&&(g.data.cut=g.data.cut.toString()),c&&c.drilldown&&(g.data.drilldown=g.data.drilldown.toString()),g.success=function(a){d(a)},g.error=function(a){e&&e(a)},g.complete=function(a){f&&f(a)},this.ajaxRequest(g)},c.Server.prototype.connect=function(a,b,c){var d=this;d.url=d._normalize_url(a);var e={dataType:"json",type:"GET"};e.url=d.url+"info",e.success=function(a,e,f){d.server_version=a.cubes_version,d.cubes_version=a.cubes_version,d.api_version=a.api_version,d.info=a,d.load_cube_list(b,c)},e.error=function(a,b,d){c&&c(a)},this.ajaxRequest(e)},c.Server.prototype._normalize_url=function(a){return"/"!=a[a.length-1]?a+"/":a},c.Server.prototype.load_cube_list=function(a,b){var c=this,d={dataType:"json",type:"GET"};return d.url=c.url+"cubes",d.success=function(b,d,e){c._cube_list=b,a&&a(c._cube_list)},d.error=function(a,c,d){b&&b(a)},this.ajaxRequest(d)},c.Server.prototype.get_cube=function(a,b,d){var e=this;if(a in this._cubes&&b)return b(this._cubes[a]),null;var f={dataType:"json",type:"GET"};return f.url=e.url+"cube/"+encodeURI(a)+"/model",f.success=function(d,f,g){var h=new c.Cube(d);e._cubes[a]=h,b&&b(h)},f.error=function(a,b,c){d&&d(a)},this.ajaxRequest(f)},c.Cube=function(b){this.name=b.name,!b.label||(this.label=b.label),!b.description||(this.description=b.description),!b.key||(this.key=b.key),!b.info||(this.info=b.info),!b.category||(this.category=b.category),!b.features||(this.features=b.features),this.measures=a.map(b.measures||[],function(a){return new c.Measure(a)}),this.aggregates=a.map(b.aggregates||[],function(a){return new c.MeasureAggregate(a)}),this.details=a.map(b.details||[],function(a){return new c.Attribute(a)}),this.dimensions=a.map(b.dimensions||[],function(a){return new c.Dimension(a)})},c.Cube.prototype.dimension=function(b){return a.isObject(b)?b:a.find(this.dimensions,function(a){return a.name===b})},c.Dimension=function(a){var b,d=this;if(d.name=a.name,!a.label||(d.label=a.label),!a.description||(d.description=a.description),!a.default_hierarchy_name||(d.default_hierarchy_name=a.default_hierarchy_name),!a.info||(d.info=a.info),!a.role||(d.role=a.role),!a.cardinality||(d.cardinality=a.cardinality),!a.nonadditive||(d.nonadditive=a.nonadditive),d.levels=[],a.levels)for(b in a.levels){var e=new c.Level(d.name,a.levels[b]);d.levels.push(e)}if(this.hierarchies={},a.hierarchies)for(b in a.hierarchies){var f=new c.Hierarchy(a.hierarchies[b],this);d.hierarchies[f.name]=f}!d.default_hierarchy_name&&a.hierarchies&&a.hierarchies.length>0&&(d.default_hierarchy_name=a.hierarchies[0].name)},c.Dimension.prototype.hierarchy=function(b){return a.isObject(b)?b:b?this.hierarchies[b]:this.hierarchies[this.default_hierarchy_name]},c.Dimension.prototype.level=function(b){return a.isObject(b)?b:a.find(this.levels,function(a){return a.name==b})},c.Dimension.prototype.toString=function(a){return this.name},c.Dimension.prototype.display_label=function(){return this.label||this.name},c.Dimension.prototype.hierarchy=function(b){return a.isObject(b)?b:null!=b?this.hierarchies[b]:this.hierarchies[this.default_hierarchy_name]},c.Hierarchy=function(a,b){this.parse(a,b)},c.Hierarchy.prototype.parse=function(b,c){var d=this;d.name=b.name,!b.label||(d.label=b.label),!b.description||(d.description=b.description),!b.info||(d.info=b.info);var e=b.levels||[];d.levels=a.map(e,function(a){return c.level(a)})},c.Hierarchy.prototype.toString=function(){return c.HIERARCHY_PREFIX_CHAR+this.name},c.Hierarchy.prototype.display_label=function(){return this.label||this.name},c.Level=function(a,b){this.parse(a,b)},c.Level.prototype.parse=function(a,b){var d,e=this;if(e.dimension_name=a,e.name=b.name,!b.label||(e.label=b.label),!b.description||(e.description=b.description),!b.info||(e.info=b.info),e._key=b.key,e._label_attribute=b.label_attribute,e._order_attribute=b.order_attribute,!b.role||(e.role=b.role),!b.cardinality||(e.cardinality=b.cardinality),e.nonadditive=b.nonadditive,e.attributes=[],b.attributes)for(d in b.attributes){var f=new c.Attribute(b.attributes[d]);e.attributes.push(f)}},c.Level.prototype.key=function(){var b=this._key;return the_attr=a.find(this.attributes,function(a){return a.name===b}),the_attr||this.attributes[0]},c.Level.prototype.label_attribute=function(){var b=null;if(this._label_attribute){var c=this._label_attribute;b=a.find(this.attributes,function(a){return a.name===c})}return b||this.key()},c.Level.prototype.order_attribute=function(){var b=null;return this._order_attribute&&(b=a.find(this.attributes,function(a){a.name===this.__order_attribute})),b||this.key()},c.Level.prototype.toString=function(){return this.name},c.Level.prototype.display_name=function(){return this.label||this.name},c.Level.prototype.full_name=function(){return this.dimension_name+c.ATTRIBUTE_STRING_SEPARATOR_CHAR+this.name},c.Level.prototype.full_name_for_drilldown=function(){return this.dimension_name+c.DIMENSION_STRING_SEPARATOR_CHAR+this.name},c.Attribute=function(a){this.ref=a.ref,this.name=a.name,this.label=a.label,this.order=a.order,this.info=a.info||{},this.description=a.description,this.format=a.format,this.missing_value=a.missing_value,this.locales=a.locales},c.Measure=function(a){this.ref=a.ref,this.name=a.name,this.label=a.label,this.order=a.order,this.info=a.info||{},this.description=a.description,this.format=a.format,this.missing_value=a.missing_value,this.nonadditive=a.nonadditive,a.aggregates&&(this.aggregates=a.aggregates)},c.MeasureAggregate=function(a){this.ref=a.ref,this.name=a.name,this.label=a.label,this.order=a.order,this.locales=a.locales,this.info=a.info||{},this.description=a.description,this.format=a.format,this.missing_value=a.missing_value,this.nonadditive=a.nonadditive,this["function"]=a["function"],this.measure=a.measure},c.Browser=function(a,b){this.cube=b,this.server=a},c.Browser.prototype.full_cube=function(){return new c.Cell(this.cube)},c.Browser.prototype.aggregate=function(a,b){a||(a={});var c={};return a.cut&&(c.cut=a.cut.toString()),a.measure&&(c.measure=a.measure.toString()),a.drilldown&&(c.drilldown=a.drilldown.toString()),a.split&&(c.split=a.split.toString()),a.order&&(c.order=a.order.toString()),a.page&&(c.page=a.page),a.pagesize&&(c.pagesize=a.pagesize),this.server.query("aggregate",this.cube,a,b)},c.Browser.prototype.facts=function(a,b){a||(a={});var c={};return a.cut&&(c.cut=a.cut.toString()),a.order&&(c.order=a.order.toString()),a.page&&(c.page=a.page),a.pagesize&&(c.pagesize=a.pagesize),this.server.query("facts",this.cube,a,b)},c.Drilldown=function(b,c,d){if(!a.isObject(b))throw"Drilldown requires a Dimension object as first argument";if(this.dimension=b,this.hierarchy=b.hierarchy(c),this.level=b.level(d)||this.hierarchy.levels[0],!this.hierarchy)throw"Drilldown cannot recognize hierarchy "+c+" for dimension "+b;if(!this.level)throw"Drilldown cannot recognize level "+d+" for dimension "+b},c.Drilldown.prototype.toString=function(){return""+this.dimension+this.hierarchy+c.DIMENSION_STRING_SEPARATOR_CHAR+this.level},c.Drilldown.prototype.keysInResultCell=function(){var b=this,c=!1,d=a.filter(b.hierarchy.levels,function(a){return a.key()===b.level.key()&&(c=!0)||!c});return a.map(d,function(a){return a.key().ref})},c.Drilldown.prototype.labelsInResultCell=function(){var b=this,c=!1,d=a.filter(b.hierarchy.levels,function(a){return a.key()===b.level.key()&&(c=!0)||!c});return a.map(d,function(a){return a.label_attribute().ref})},c.Cell=function(b,c){this.cube=b,this.cuts=a.map(c||[],function(a){return a})},c.Cell.prototype.slice=function(a){for(var b=[],d=!1,e=0;e<this.cuts.length;e++){var f=this.cuts[e];f.dimension==a.dimension?(b.push(a),d=!0):b.push(f)}d||b.push(a);var g=new c.Cell(this.cube,b);return g},c.Cell.prototype.toString=function(){return a.map(this.cuts||[],function(a){return a.toString()}).join(c.CUT_STRING_SEPARATOR_CHAR)},c.Cell.prototype.cut_for_dimension=function(b){return a.find(this.cuts,function(a){return a.dimension.name==b})},c.PointCut=function(a,b,c,d){this.type="point",this.dimension=a,this.hierarchy=a.hierarchy(b),this.path=c,this.invert=!!d},c.PointCut.prototype.toString=function(){var a=c.string_from_path(this.path);return(this.invert?c.CUT_INVERSION_CHAR:"")+this.dimension+(this.hierarchy||"")+c.DIMENSION_STRING_SEPARATOR_CHAR+a},c.SetCut=function(a,b,c,d){this.type="set",this.dimension=a,this.hierarchy=a.hierarchy(b),this.paths=c,this.invert=!!d},c.SetCut.prototype.toString=function(){var b=a.map(this.paths,c.string_from_path).join(c.SET_CUT_SEPARATOR_CHAR);return(this.invert?c.CUT_INVERSION_CHAR:"")+this.dimension+(this.hierarchy||"")+c.DIMENSION_STRING_SEPARATOR_CHAR+b},c.RangeCut=function(a,b,c,d,e){if(this.type="range",this.dimension=a,this.hierarchy=a.hierarchy(b),null===c&&null===d)throw"Either from_path or to_path must be defined for RangeCut";this.from_path=c,this.to_path=d,this.invert=!!e},c.RangeCut.prototype.toString=function(){var a=c.string_from_path(this.from_path)+c.RANGE_CUT_SEPARATOR_CHAR+c.string_from_path(this.to_path);return(this.invert?c.CUT_INVERSION_CHAR:"")+this.dimension+(this.hierarchy||"")+c.DIMENSION_STRING_SEPARATOR_CHAR+a},c.CUT_INVERSION_CHAR="!",c.CUT_STRING_SEPARATOR_CHAR="|",c.DIMENSION_STRING_SEPARATOR_CHAR=":",c.ATTRIBUTE_STRING_SEPARATOR_CHAR=".",c.HIERARCHY_PREFIX_CHAR="@",c.PATH_STRING_SEPARATOR_CHAR=",",c.RANGE_CUT_SEPARATOR_CHAR="-",c.SET_CUT_SEPARATOR_CHAR=";",c.CUT_STRING_SEPARATOR=/\|/g,c.DIMENSION_STRING_SEPARATOR=/:/g,c.PATH_STRING_SEPARATOR=/,/g,c.RANGE_CUT_SEPARATOR=/-/g,c.SET_CUT_SEPARATOR=/;/g,c.PATH_PART_ESCAPE_PATTERN=/([\\!|:;,-])/g,c.PATH_PART_UNESCAPE_PATTERN=/\\([\\!|:;,-])/g,c.CUT_PARSE_REGEXP=new RegExp("^("+c.CUT_INVERSION_CHAR+"?)(\\w+)(?:"+c.HIERARCHY_PREFIX_CHAR+"(\\w+))?"+c.DIMENSION_STRING_SEPARATOR_CHAR+"(.*)$"),c.DRILLDOWN_PARSE_REGEXP=new RegExp("^(\\w+)(?:"+c.HIERARCHY_PREFIX_CHAR+"(\\w+))?(?:"+c.DIMENSION_STRING_SEPARATOR_CHAR+"(\\w+))?$"),c.NULL_PART_STRING="__null__",c.SPLIT_DIMENSION_STRING="__within_split__",c.SPLIT_DIMENSION=new c.Dimension({name:c.SPLIT_DIMENSION_STRING,label:"Matches Filters",hierarchies:[{name:"default",levels:[c.SPLIT_DIMENSION_STRING]}],levels:[{name:c.SPLIT_DIMENSION_STRING,attributes:[{name:c.SPLIT_DIMENSION_STRING}],label:"Matches Filters"}]}),c._split_with_negative_lookbehind=function(a,b,c){for(var d,e=a,f=[];null!=(d=b.exec(e));)e.substr(d.index-c.length,c.length)!=c&&(f.push(e.substring(0,d.index)),e=e.substring(Math.min(d.index+d[0].length,e.length)),b.lastIndex=0);return f.push(e),f},c._escape_path_part=function(a){return null==a?c.NULL_PART_STRING:a.toString().replace(c.PATH_PART_ESCAPE_PATTERN,function(a,b){return"\\"+b})},c._unescape_path_part=function(a){return a===c.NULL_PART_STRING?null:a.replace(c.PATH_PART_UNESCAPE_PATTERN,function(a,b){return b})},c.string_from_path=function(b){var d=a.map(b||[],function(a){return c._escape_path_part(a)}).join(c.PATH_STRING_SEPARATOR_CHAR);return d},c.path_from_string=function(b){var d=c._split_with_negative_lookbehind(b,c.PATH_STRING_SEPARATOR,"\\"),e=a.map(d||[],function(a){return c._unescape_path_part(a)});return e},c.cut_from_string=function(b,d){var e=c.CUT_PARSE_REGEXP.exec(d);if(!e)return null;var f=!!e[1],g=e[2],h=e[3]||null,i=e[4],j=b.dimension(g),k=c._split_with_negative_lookbehind(i,c.SET_CUT_SEPARATOR,"\\");if(k.length>1)return new c.SetCut(j,h,a.map(k,function(a){return c.path_from_string(a)}),f);if(k=c._split_with_negative_lookbehind(i,c.RANGE_CUT_SEPARATOR,"\\"),2==k.length){var l=k[0]?c.path_from_string(k[0]):null,m=k[1]?c.path_from_string(k[1]):null;return new c.RangeCut(j,h,l,m,f)}return new c.PointCut(j,h,c.path_from_string(i),f)},c.cuts_from_string=function(b,d){var e=c._split_with_negative_lookbehind(d,c.CUT_STRING_SEPARATOR,"\\");return a.map(e||[],function(a){return c.cut_from_string(b,a)})},c.cell_from_string=function(a,b){return new c.Cell(a,c.cuts_from_string(a,b))},c.drilldown_from_string=function(a,b){var d=c.DRILLDOWN_PARSE_REGEXP.exec(b);if(!d)return null;var e=d[1],f=d[2]||null,g=d[3]||null,h=a.dimension(e);if(!h){if(e!==c.SPLIT_DIMENSION_STRING)return null;h=c.SPLIT_DIMENSION}return new c.Drilldown(h,f,g)},c.drilldowns_from_string=function(b,d){var e=c._split_with_negative_lookbehind(d,c.CUT_STRING_SEPARATOR,"\\");return a.map(e||[],function(a){return c.drilldown_from_string(b,a)})},c.drilldowns_to_string=function(b){return a.map(b,function(a){return a.toString()}).join(c.CUT_STRING_SEPARATOR_CHAR)},b.cubes=c}.call(this),cubes.Dimension.prototype.hierarchies_count=function(){var a=0;for(hiename in this.hierarchies)this.hierarchies.hasOwnProperty(hiename)&&a++;return a},cubes.Dimension.prototype.default_hierarchy=function(){return this.hierarchies[this.default_hierarchy_name]},cubes.Cube.prototype.cvdim_dim=function(a){var b=a;return a.indexOf("@")>0?b=a.split("@")[0]:a.indexOf(":")>0&&(b=a.split(":")[0]),
this.dimension(b)},cubes.Cube.prototype.cvdim_parts=function(a){var b=this.cvdim_dim(a),c=b.default_hierarchy();if(a.indexOf("@")>0){var d=a.split("@")[1].split(":")[0];c=b.hierarchy(d)}var e=null;if(a.indexOf(":")>0){var f=a.split(":")[1];e=b.level(f)}else e=b.level(c.levels[0]);for(var g=null,h=0;h<c.levels.length;h++)if(e.name==c.levels[h]){g=h+1;break}return{dimension:b,level:e,depth:g,hierarchy:c,label:b.label+("default"!=c.name?" / "+c.label:"")+(c.levels.length>1?": "+e.label:""),labelNoLevel:b.label+("default"!=c.name?" / "+c.label:""),fullDrilldownValue:b.name+("default"!=c.name?"@"+c.name:"")+":"+e.name}},cubes.Cube.prototype.measureAggregates=function(a){var b=$.grep(this.aggregates,function(b){return a?b.measure==a:!b.measure});return b},cubes.Level.prototype.readCell=function(a){if(!(this.key().ref in a))return null;var b={};return b.key=a[this.key().ref],b.label=a[this.label_attribute().ref],b.info={},$(this.attributes).each(function(c,d){b.info[d.ref]=a[d.ref]}),b},cubes.Hierarchy.prototype.readCell=function(a,b){for(var c=[],d=0;d<this.levels.length;d++){var e=this.levels[d];if(info=e.readCell(a),null!=info&&c.push(info),void 0!=b&&null!=b&&b.name==e.name)break}return c},angular.module("cv.cubes",[]),angular.module("cv.cubes").service("cubesService",["$rootScope","cvOptions",function(a,b){var c=this;this.cubesserver=null,this.initialize=function(){},this.connect=function(){this.cubesserver=new cubes.Server(c.cubesAjaxHandler),console.debug("Cubes client connecting to: "+b.cubesUrl),this.cubesserver.connect(b.cubesUrl,function(){console.debug("Cubes client initialized (server version: "+c.cubesserver.server_version+")"),a.$apply()})},this.cubesAjaxHandler=function(a){return c.cubesRequest(a.url,a.data||[],a.success)},this.cubesRequest=function(a,d,e){"/"==a.charAt(0)&&(a=b.cubesUrl+a);var f=$.get(a,d,c._cubesRequestCallback(e),b.jsonRequestType);return f.fail(c.defaultRequestErrorHandler),f},this._cubesRequestCallback=function(a){return function(b,c){a(b)}},this.defaultRequestErrorHandler=function(a,b,c){401==a.status?cubesviewer.alert("Unauthorized."):403==a.status?cubesviewer.alert("Forbidden."):400==a.status?cubesviewer.alert($.parseJSON(a.responseText).message):(console.debug(a),cubesviewer.showInfoMessage("CubesViewer: An error occurred while accessing the data server.\n\nPlease try again or contact the application administrator if the problem persists.\n"))},this.buildBrowserArgs=function(a,b,c){var d={};if(!c){var e=a.params.drilldown.slice(0);b&&e.splice(0,0,a.params.xaxis);for(var f=0;f<e.length;f++)e[f]=cubes.drilldown_from_string(a.cube,a.cube.cvdim_parts(e[f]).fullDrilldownValue);e.length>0&&(d.drilldown=cubes.drilldowns_to_string(e))}var g=this.buildQueryCuts(a);return g.length>0&&(d.cut=new cubes.Cell(a.cube,g)),d},this.buildQueryCuts=function(a){var b=[];return $(a.params.cuts).each(function(c,d){var e=d.invert?"!":"";b.push(cubes.cut_from_string(a.cube,e+d.dimension+":"+d.value))}),b},this.initialize()}]),angular.module("cv",["bootstrapSubmenu","ui.grid","ui.grid.resizeColumns","ui.grid.selection","ui.grid.autoResize","ui.grid.pagination","ui.grid.pinning","cv.cubes","cv.views"]),angular.module("cv").constant("angularMomentConfig",{}),angular.module("cv").run(["$timeout","cvOptions","cubesService",function(a,b,c){var d={cubesUrl:null,cubesLang:null,pagingOptions:[15,30,100,250],datepickerShowWeek:!0,datepickerFirstDay:1,tableResizeHackMinWidth:350,jsonRequestType:"json"};$.extend(d,b),$.extend(b,d),c.connect()}]);var cubesviewer={version:"2.0.1-devel",VIEW_STATE_INITIALIZING:1,VIEW_STATE_INITIALIZED:2,VIEW_STATE_ERROR:3,_configure:function(a){$(".cv-version").html(cubesviewer.version),angular.module("cv").constant("cvOptions",a)},init:function(a){this._configure(a),angular.element(document).ready(function(){angular.bootstrap(document,["cv"])})}};angular.module("cv.views",["cv.views.cube"]),angular.module("cv.views").service("viewsService",["$rootScope","cvOptions","cubesService",function(a,b,c){this.views=[],this.createView=function(a,b,c){var d={};if("string"==typeof c)try{d=$.parseJSON(c)}catch(e){alert("Error: could not process serialized data (JSON parse error)."),d.name="Undefined view"}else d=c;var f={id:a,type:b,state:cubesviewer.STATE_INITIALIZING,params:{}};return $.extend(f.params,d),$(document).trigger("cubesviewerViewCreate",[f]),$.extend(f.params,d),f.state==cubesviewer.STATE_INITIALIZING&&(f.state=cubesviewer.STATE_INITIALIZED),f}}]),angular.module("cv.views.cube",[]),angular.module("cv.views.cube").controller("CubesViewerViewsCubeController",["$rootScope","$scope","cvOptions","cubesService","viewsService",function($rootScope,$scope,cvOptions,cubesService,viewsService){$scope.view._cubeDataUpdated=!1,$scope.dimensionFilter=null,$scope.setViewMode=function(a){$scope.view.params.mode=a,$scope.view._cubeDataUpdated=!0},$scope.initCube=function(){$scope.view.cube=null;var a={mode:"explore",drilldown:[],cuts:[]};$scope.view.params=$.extend(!0,{},a,$scope.view.params);var b=cubesService.cubesserver.get_cube($scope.view.params.cubename,function(a){$scope.view.cube=a,"cv-view-params"in $scope.view.cube.info&&$.extend($scope.view.params,$scope.view.cube.info["cv-view-params"]),$scope.view._cubeDataUpdated=!0});b&&b.fail(function(){$scope.view.state=cubesviewer.STATE_ERROR,$rootScope.$apply()})},$scope.selectDrill=function(a,b){console.debug(a);$scope.view.cube;""==a?$scope.view.params.drilldown=[]:($scope.removeDrill(a),1==b&&$scope.view.params.drilldown.push(a)),$scope.view._cubeDataUpdated=!0},$scope.removeDrill=function(a){for(var b=a.split(":")[0],c=0;c<$scope.view.params.drilldown.length;c++)if($scope.view.params.drilldown[c].split(":")[0]==b){$scope.view.params.drilldown.splice(c,1);break}$scope.view._cubeDataUpdated=!0},$scope.columnFormatFunction=function(agmes){var view=$scope.view,measure=agmes;if(!measure)return function(a){return a};"measure"in agmes&&(measure=$.grep(view.cube.measures,function(a,b){return a.ref==agmes.measure})[0]);var formatterFunction=null;return formatterFunction=measure&&"cv-formatter"in measure.info?function(value,row){return eval(measure.info["cv-formatter"])}:function(a){return Math.formatnumber(a,"record_count"==agmes.ref?0:2)}},$scope.filterSelected=function(){console.debug("Filtering");var a=$scope.view;if(1!=a.params.drilldown.length)return void alert("Can only filter multiple values in a view with one level of drilldown.");if(console.debug($scope.gridApi),$scope.gridApi.selection.getSelectedCount()<=0)return void alert("Cannot filter. No rows are selected.");var b=[],c=$scope.gridApi.selection.getSelectedRows();$(c).each(function(a,c){b.push(c.key0.cutValue)});var d=!1;$scope.selectCut($scope.gridOptions.columnDefs[0].cutDimension,b.join(";"),d)},$scope.selectCut=function(a,b,c){console.debug("Filtering");var d=$scope.view;""!=a?""!=b?(d.params.cuts=$.grep(d.params.cuts,function(b){return b.dimension==a},!0),d.params.cuts.push({dimension:a,value:b,invert:c})):d.params.cuts=$.grep(d.params.cuts,function(b){return b.dimension==a},!0):d.params.cuts=[],$scope.view._cubeDataUpdated=!0},$scope.showDimensionFilter=function(a){$scope.view.dimensionFilter=a},$scope.selectMeasure=function(a){$scope.view.params.yaxis=a,$scope.view._cubeDataUpdated=!0},$scope.selectXAxis=function(a){console.debug(a),$scope.view.params.xaxis=""==a?null:a,$scope.view._cubeDataUpdated=!0}}]).directive("cvViewCube",function(){return{restrict:"A",templateUrl:"views/cube/cube.html",scope:{view:"="},controller:"CubesViewerViewsCubeController",link:function(a,b,c){a.initCube()}}}),Math.formatnumber=function(a,b,c,d){if(void 0===a)return"";void 0===b&&(b=2),void 0===c&&(c="."),void 0===d&&(d=" ");for(var e="",f=Math.floor(a).toString(),g=0;g<f.length;g++){e+=f[g];var h=f.length-g-1;h>0&&h%3==0&&(e+=d)}return b>0&&(e+=parseFloat(a-Math.floor(a)).toFixed(b).toString().replace(".",c).substring(1)),e},angular.module("cv.views.cube").controller("CubesViewerViewsCubeExploreController",["$rootScope","$scope","$timeout","cvOptions","cubesService","viewsService",function(a,b,c,d,e,f){b.$parent.gridData=[],b.$parent.onGridRegisterApi=function(a){console.debug("Grid Register Api: Explore"),b.gridApi=a,a.selection.on.rowSelectionChanged(b,function(a){console.debug(a.entity)}),a.selection.on.rowSelectionChangedBatch(b,function(a){console.debug(a)})},b.$parent.gridApi=null,b.$parent.gridOptions={onRegisterApi:b.onGridRegisterApi,selectionRowHeaderWidth:24},b.initialize=function(){},b.$watch("view._cubeDataUpdated",function(a){a&&(b.view._cubeDataUpdated=!1,b.loadData())}),b.loadData=function(){var a=e.buildBrowserArgs(b.view,!1,!1),c=new cubes.Browser(e.cubesserver,b.view.cube),d=c.aggregate(a,b._loadDataCallback);d.always(function(){})},b._loadDataCallback=function(c,d){b.processData(c),a.$apply(),b.gridApi.core.refresh(),a.$apply()},b.processData=function(a){var c=b.view;b.gridData=[],b.gridFormatters={},angular.extend(b.$parent.gridOptions,{data:b.gridData,rowHeight:24,onRegisterApi:b.onGridRegisterApi,enableColumnResizing:!0,showColumnFooter:!0,enableGridMenu:!0,paginationPageSizes:d.pagingOptions,paginationPageSize:d.pagingOptions[0],enableRowSelection:c.params.drilldown.length>0,enablePinning:!1,multiSelect:!0,selectionRowHeaderWidth:20,columnDefs:[]}),$(c.cube.aggregates).each(function(c,d){var e={name:d.label,field:d.ref,index:d.ref,cellClass:"text-right",width:115,cellTemplate:'<div class="ui-grid-cell-contents" title="TOOLTIP">{{ col.colDef.formatter(COL_FIELD, row, col) }}</div>',formatter:b.columnFormatFunction(d),footerValue:b.columnFormatFunction(d)(a.summary[d.ref],null,e)};e.footerCellTemplate='<div class="ui-grid-cell-contents text-right">{{ col.colDef.footerValue }}</div>',b.gridOptions.columnDefs.push(e)}),b._sortData(a.cells,!1),b._addRows(a);var f=[];$(c.params.drilldown).each(function(a,b){f.push(c.cube.cvdim_dim(b).label)});for(var g=0;g<c.params.drilldown.length;g++){var h=(c.cube.cvdim_dim(c.params.drilldown[g]),c.cube.cvdim_parts(c.params.drilldown[g])),i=h.dimension.name+("default"!=h.hierarchy.name?"@"+h.hierarchy.name:""),j="";0==g&&(j=0==e.buildQueryCuts(c).length?"<b>Summary</b>":"<b>Summary <i>(Filtered)</i></b>"),b.gridOptions.columnDefs.splice(g,0,{name:f[g],field:"key"+g,index:"key"+g,enableHiding:!1,cutDimension:i,width:190,cellTemplate:'<div class="ui-grid-cell-contents" title="TOOLTIP"><a href="" ng-click="grid.appScope.selectCut(col.colDef.cutDimension, COL_FIELD.cutValue, false)">{{ COL_FIELD.title }}</a></div>',footerCellTemplate:'<div class="ui-grid-cell-contents">'+j+"</div>"})}0==c.params.drilldown.length&&b.gridOptions.columnDefs.splice(0,0,{name:c.cube.label,field:"key0",index:"key0",enableHiding:!1,align:"left",width:190})},this.drawSummary=function(a,b){$("#summaryTable-"+a.id).get(0).updateIdsOfSelectedRows=function(b,c){var d=$.inArray(b,$("#summaryTable-"+a.id).get(0).idsOfSelectedRows);!c&&d>=0?$("#summaryTable-"+a.id).get(0).idsOfSelectedRows.splice(d,1):0>d&&$("#summaryTable-"+a.id).get(0).idsOfSelectedRows.push(b)},$("#summaryTable-"+a.id).get(0).idsOfSelectedRows=[],$("#summaryTable-"+a.id).jqGrid({data:dataRows,userData:b.summary?dataTotals:null,datatype:"local",height:"auto",rowNum:cubesviewer.options.pagingOptions[0],rowList:cubesviewer.options.pagingOptions,colNames:colNames,colModel:colModel,pager:"#summaryPager-"+a.id,sortname:cubesviewer.views.cube.explore.defineColumnSort(a,["key","desc"])[0],viewrecords:!0,sortorder:cubesviewer.views.cube.explore.defineColumnSort(a,["key","desc"])[1],footerrow:!0,userDataOnFooter:!0,forceFit:!1,shrinkToFit:!1,width:cubesviewer.options.tableResizeHackMinWidth,multiselect:!0,multiboxonly:!0,onSelectRow:$("#summaryTable-"+a.id).get(0).updateIdsOfSelectedRows,onSelectAll:function(b,c){var d,e,f;for(d=0,e=b.length;e>d;d++)f=b[d],$("#summaryTable-"+a.id).get(0).updateIdsOfSelectedRows(f,c)},loadComplete:function(){var b,c;for(b=0,c=$("#summaryTable-"+a.id).get(0).idsOfSelectedRows.length;c>b;b++)$(this).jqGrid("setSelection",$("#summaryTable-"+a.id).get(0).idsOfSelectedRows[b],!1);a.cubesviewer.views.cube.explore.onTableLoaded(a)},resizeStop:a.cubesviewer.views.cube.explore._onTableResize(a),onSortCol:a.cubesviewer.views.cube.explore._onTableSort(a)}),this.cubesviewer.views.cube._adjustGridSize()},b._addRows=function(a){var c=b.view,d=b.gridData;if($(a.cells).each(function(a,b){for(var e=[],f={},g=[],h=0;h<c.params.drilldown.length;h++){var i=(c.cube.cvdim_dim(c.params.drilldown[h]),c.cube.cvdim_parts(c.params.drilldown[h])),j=i.hierarchy.readCell(b,i.level),k=[],l=[];$(j).each(function(a,b){k.push(b.key),l.push(b.label)}),e.push(k.join("-"));i.dimension.name+("default"!=i.hierarchy.name?"@"+i.hierarchy.name:"");g.push({cutValue:k.join(","),title:l.join(" / ")})}f.key=g.join(" / ");for(var h=0;h<g.length;h++)f["key"+h]=g[h];$(c.cube.aggregates).each(function(a,c){f[c.ref]=b[c.ref]}),f.id=e.join("-"),d.push(f)}),0==d.length&&a.summary){var f={},g=0==e.buildQueryCuts(c).length?"Summary":"Summary (Filtered)";f.key0=g,$(c.cube.aggregates).each(function(b,c){f[c.ref]=a.summary[c.ref]}),d.push(f)}},b._sortData=function(a,b){},b.initialize()}]),angular.module("cv.views.cube").controller("CubesViewerViewsCubeFilterDimensionController",["$rootScope","$scope","cvOptions","cubesService","viewsService",function(a,b,c,d,e){b.parts=null,b.dimensionValues=null,b.loadingDimensionValues=!1,b.initialize=function(){},b.$watch("view.dimensionFilter",function(){b.parts=b.view.cube.cvdim_parts(b.view.dimensionFilter),b.loadDimensionValues()}),b.closeDimensionFilter=function(){b.view.dimensionFilter=null},b.loadDimensionValues=function(){var a={hierarchy:b.parts.hierarchy.name,depth:b.parts.depth},c=b.view.dimensionFilter;b.loadingDimensionValues=!0,jqxhr=d.cubesRequest("/cube/"+b.view.cube.name+"/members/"+b.parts.dimension.name,a,b._loadDimensionValuesCallback(c)),jqxhr.always(function(){console.debug("Function"),b.loadingDimensionValues=!1,b.$apply()})},b._loadDimensionValuesCallback=function(a){var a=a;return function(c,d){b.view.dimensionFilter==a&&b._processData(c)}},b._processData=function(a){console.debug(a);var c=(b.view.cube.cvdim_dim(b.view.dimensionFilter),[]);$(a.data).each(function(a,d){var e=b.view.cube.cvdim_parts(b.view.dimensionFilter),f=e.hierarchy.readCell(d,e.level),g=[],h=[];$(f).each(function(a,b){g.push(b.key),h.push(b.label)}),c.push({label:h.join(" / "),value:g.join(",")})}),b.dimensionValues=c,console.debug(b.dimensionValues)},b.initialize()}]),angular.module("cv.views.cube").controller("CubesViewerViewsCubeFactsController",["$rootScope","$scope","$timeout","cvOptions","cubesService","viewsService",function(a,b,c,d,e,f){b.$parent.gridData=[],b.$parent.onGridRegisterApi=function(a){console.debug("Grid Register Api: Facts"),b.gridApi=a,a.selection.on.rowSelectionChanged(b,function(a){console.debug(a.entity)}),a.selection.on.rowSelectionChangedBatch(b,function(a){console.debug(a)})},b.$parent.gridApi=null,b.$parent.gridOptions={onRegisterApi:b.onGridRegisterApi,enableRowSelection:!1,enableRowHeaderSelection:!1},b.initialize=function(){},b.$watch("view._cubeDataUpdated",function(a){a&&(b.view._cubeDataUpdated=!1,b.loadData())}),b.loadData=function(){var a=e.buildBrowserArgs(b.view,!1,!1),c=new cubes.Browser(e.cubesserver,b.view.cube),d=c.facts(a,b._loadDataCallback);d.always(function(){})},b._loadDataCallback=function(c,d){b.processData(c),a.$apply(),b.gridApi.core.refresh(),a.$apply()},b.processData=function(a){var c=b.view;b.gridData=[],b.gridFormatters={};var e=c.cube.dimensions,f=c.cube.measures,g=c.cube.details;angular.extend(b.$parent.gridOptions,{data:b.gridData,rowHeight:24,onRegisterApi:b.onGridRegisterApi,enableColumnResizing:!0,enableGridMenu:!0,paginationPageSizes:d.pagingOptions,paginationPageSize:d.pagingOptions[0],enableRowSelection:!1,enableRowHeaderSelection:!1,enablePinning:!1,multiSelect:!1,columnDefs:[]}),b.gridOptions.columnDefs.push({name:"id",field:"id",index:"id",enableHiding:!1,width:80});for(var h in e)for(var i=e[h],j=0;j<i.levels.length;j++){var k=i.levels[j],l={name:k.label,field:k.key().ref,index:k.key().ref,width:95,cellTemplate:'<div class="ui-grid-cell-contents" title="TOOLTIP">{{ row.entity[col.colDef.field] }}</div>'};b.gridOptions.columnDefs.push(l)}for(var m in f){var n=f[m],l={name:n.label,field:n.ref,index:n.ref,cellClass:"text-right",sorttype:"number",width:75,cellTemplate:'<div class="ui-grid-cell-contents" title="TOOLTIP">{{ col.colDef.formatter(COL_FIELD, row, col) }}</div>',formatter:b.columnFormatFunction(n)};b.gridOptions.columnDefs.push(l)}for(var o in g){var p=g[o],l={name:p.name,field:p.ref,index:p.ref,width:95};b.gridOptions.columnDefs.push(l)}b._addRows(a)},this.drawTable=function(a,b){$("#factsTable-"+a.id).jqGrid({data:dataRows,datatype:"local",height:"auto",rowNum:cubesviewer.options.pagingOptions[0],rowList:cubesviewer.options.pagingOptions,colNames:colNames,colModel:colModel,pager:"#factsPager-"+a.id,sortname:cubesviewer.views.cube.explore.defineColumnSort(a,["key","desc"])[0],viewrecords:!0,sortorder:cubesviewer.views.cube.explore.defineColumnSort(a,["key","desc"])[1],userDataOnFooter:!0,forceFit:!1,shrinkToFit:!1,width:cubesviewer.options.tableResizeHackMinWidth,beforeSelectRow:function(){return!1},loadComplete:function(){a.cubesviewer.views.cube.explore.onTableLoaded(a)},resizeStop:a.cubesviewer.views.cube.explore._onTableResize(a),onSortCol:a.cubesviewer.views.cube.explore._onTableSort(a)}),this.cubesviewer.views.cube._adjustGridSize()},b._addRows=function(a){var c=b.view,d=b.gridData,e=0,f=c.cube.dimensions,g=c.cube.measures,h=c.cube.details;$(a).each(function(a,b){var c=[];for(var i in f)for(var j=f[i],k=0;k<j.levels.length;k++){var l=j.levels[k],m=l.readCell(b);c[l.key().ref]=m.label}for(var n in g){var o=g[n];c[o.ref]=b[o.ref]}for(var p in h){var q=h[p];c[q.ref]=b[q.ref]}c.id=e++,"id"in b&&(c.id=b.id),c.key=c.id,d.push(c)})},b.initialize()}]),angular.module("cv.views.cube").controller("CubesViewerViewsCubeSeriesController",["$rootScope","$scope","$timeout","cvOptions","cubesService","viewsService",function(a,b,c,d,e,f){b.$parent.gridData=[],b.$parent.onGridRegisterApi=function(a){console.debug("Grid Register Api: Series"),b.gridApi=a,a.selection.on.rowSelectionChanged(b,function(a){console.debug(a.entity)}),a.selection.on.rowSelectionChangedBatch(b,function(a){console.debug(a)})},b.$parent.gridApi=null,b.$parent.gridOptions={onRegisterApi:b.onGridRegisterApi,enableRowSelection:!1,enableRowHeaderSelection:!1},b.initialize=function(){b.view.params=$.extend({},{xaxis:null,yaxis:null},b.view.params)},b.$watch("view._cubeDataUpdated",function(a){a&&(b.view._cubeDataUpdated=!1,b.loadData())}),b.loadData=function(){var a=b.view;if(null!=a.params.yaxis){var c=e.buildBrowserArgs(b.view,null!=b.view.params.xaxis?!0:!1,!1),d=new cubes.Browser(e.cubesserver,b.view.cube),f=d.aggregate(c,b._loadDataCallback);f.always(function(){})}},b._loadDataCallback=function(c,d){b.processData(c),a.$apply(),b.gridApi.core.refresh(),a.$apply()},b.processData=function(a){b.view;b.gridData=[],b.gridFormatters={},angular.extend(b.$parent.gridOptions,{data:b.gridData,rowHeight:24,onRegisterApi:b.onGridRegisterApi,enableColumnResizing:!0,enableGridMenu:!0,paginationPageSizes:d.pagingOptions,paginationPageSize:d.pagingOptions[0],enableRowSelection:!1,enableRowHeaderSelection:!1,enablePinning:!1,multiSelect:!1,selectionRowHeaderWidth:20,columnDefs:[]}),b._addRows(a)},b._addRows=function(a){var c=b.view,d=b.gridData,e=(c.cube.dimensions,c.cube.measures,c.cube.details,c.params.drilldown.slice(0));null!=c.params.xaxis&&e.splice(0,0,c.params.xaxis);var f=null==c.params.xaxis?0:1,g=[];if($(a.cells).each(function(a,h){for(var i=[],j=[],k=0;k<e.length;k++){var l=c.cube.cvdim_parts(e[k]),m=l.hierarchy.readCell(h,l.level),n=[],o=[];$(m).each(function(a,b){n.push(b.key),o.push(b.label)}),j.push(o.join(" / "))}var p=null==c.params.xaxis?c.params.yaxis:j[0],q=h[c.params.yaxis],r=null==c.params.xaxis?j.join(" / "):j.slice(1).join(" / "),i=$.grep(d,function(a){return a.key==r});if(i.length>0)i[0][p]=q;else{var s={};s.key=r,s[p]=q;for(var k=f;k<j.length;k++)s["key"+(k-f)]=j[k];d.push(s)}if(g.indexOf(p)<0){g.push(p);var t=$.grep(c.cube.aggregates,function(a){return a.ref==c.params.yaxis})[0],u={name:p,field:p,index:p,cellClass:"text-right",sorttype:"number",width:75,cellTemplate:'<div class="ui-grid-cell-contents" title="TOOLTIP">{{ col.colDef.formatter(COL_FIELD, row, col) }}</div>',formatter:b.columnFormatFunction(t)};b.gridOptions.columnDefs.push(u)}}),$(c.params.drilldown).each(function(a,d){var e={name:c.cube.cvdim_dim(d).label,field:"key"+a,index:"key"+a,width:190};b.gridOptions.columnDefs.splice(a,0,e)}),0==c.params.drilldown.length&&d.length>0){d[0].key0=c.params.yaxis;var h={name:"Measure",field:"key0",index:"key0",width:190};b.gridOptions.columnDefs.splice(0,0,h)}},b.initialize()}]),cubesviewer.views.cube.chart=new cubesviewerViewCubeChart,$(document).bind("cubesviewerViewCreate",{},cubesviewer.views.cube.chart.onViewCreate),$(document).bind("cubesviewerViewDestroyed",{},cubesviewer.views.cube.chart.onViewDestroyed),$(document).bind("cubesviewerViewDraw",{},cubesviewer.views.cube.chart.onViewDraw),angular.module("cv.studio",["ui.bootstrap","cv"]),angular.module("cv.studio").service("studioViewsService",["$rootScope","cvOptions","cubesService","viewsService",function(a,b,c,d){this.views=[],this.lastViewId=0,this.addViewCube=function(a){this.lastViewId++;var b="view"+this.lastViewId,e=c.cubesserver.cubeinfo(a),f=d.createView(b,"cube",{cubename:a,name:e.label+" ("+this.lastViewId+")",collapsed:!1});return this.views.push(f),f},this.closeView=function(a){var b=this.views.indexOf(a);b>=0&&this.views.splice(b,1)},this.toggleCollapseView=function(a){a.collapsed=!a.collapsed}}]),angular.module("cv.studio").controller("CubesViewerStudioViewController",["$rootScope","$scope","cvOptions","cubesService","studioViewsService",function(a,b,c,d,e){b.studioViewsService=e}]).directive("cvStudioView",function(){return{restrict:"A",templateUrl:"studio/panel.html",scope:{view:"="}}}),angular.module("cv.studio").controller("CubesViewerStudioController",["$rootScope","$scope","cvOptions","cubesService","studioViewsService",function(a,b,c,d,e){b.cvVersion=cubesviewer.version,b.cvOptions=c,b.cubesService=d,b.studioViewsService=e,this.views=[],this.lastViewId=0,b.closeView=function(a){for(var b=0;b<this.views.length&&this.views[b].id!=a.id;b++);$("#"+a.id).remove(),this.views.splice(b,1),cubesviewer.views.destroyView(a)},b.addViewObject=function(a){this.lastViewId++;var b="view"+this.lastViewId,c=this.createContainer(b),d=this.cubesviewer.views.createView(b,$(".cv-gui-viewcontent",c),"cube",a);return this.views.push(d),$(c).find(".cv-gui-closeview").click(function(){return cubesviewer.gui.closeView(d),!1}),d},this.createContainer=function(a){return $("#"+a)},this.onViewDraw=function(a,b){var c=$(b.container).parents(".cv-gui-cubesview");$(".cv-gui-container-name",c).empty().text(b.params.name),b.cubesviewer.gui.drawMenu(b)},this.drawMenu=function(a){$(a.container).find(".cv-view-toolbar").append('<button class="panelbutton" title="Panel">Panel</button>'),$(a.container).find(".cv-view-viewmenu").append('<ul class="cv-view-menu cv-view-menu-panel" style="float: right; width: 180px;"></ul>'),$(a.container).find(".panelbutton").button();var b=$(".cv-view-menu-panel",$(a.container));b.append('<li><a class="cv-gui-cloneview" href="#"><span class="ui-icon ui-icon-copy"></span>Clone</a></li><li><a class="cv-gui-renameview" href="#"><span class="ui-icon ui-icon-pencil"></span>Rename...</a></li><div></div><li><a class="cv-gui-closeview" href="#"><span class="ui-icon ui-icon-close"></span>Close</a></li>'),a.cubesviewer.views.cube._initMenu(a,".panelbutton",".cv-view-menu-panel"),$(a.container).find(".cv-gui-closeview").unbind("click").click(function(){return cubesviewer.gui.closeView(a),!1}),$(a.container).find(".cv-gui-renameview").unbind("click").click(function(){return cubesviewer.gui.renameView(a),!1}),$("#"+a.id).find(".cv-gui-container-name").unbind("dblclick").dblclick(function(){return cubesviewer.gui.renameView(a),!1}),$(a.container).find(".cv-gui-cloneview").unbind("click").click(function(){return cubesviewer.gui.cloneView(a),!1})},this.renameView=function(a){var b=prompt("Enter new view name:",a.params.name);null!=b&&""!=b&&(a.params.name=b,cubesviewer.views.redrawView(a))},this.cloneView=function(a){viewobject=$.parseJSON(a.cubesviewer.views.serialize(a)),viewobject.name="Clone of "+viewobject.name;var a=this.addViewObject(viewobject);a.savedId=0,a.owner=this.options.user,a.shared=!1,this.cubesviewer.views.redrawView(a)},this.onCubesViewerInitialized=function(){cubesviewer.gui.drawCubesList()},this.drawCubesList=function(){$(".cv-gui-cubeslist-menu",$(cubesviewer.gui.options.container)).find(".cv-gui-addviewcube").click(function(){cubesviewer.gui.addViewCube($(this).attr("data-cubename"));return!1}),$(cubesviewer.gui.views).each(function(a,b){b.cubesviewer.views.redrawView(b)})},this.onGuiDraw=function(a,b){$("[data-submenu]",b.options.container).submenupicker()}}]),angular.module("cv.studio").config(["$compileProvider",function(a){}]),angular.module("cv.studio").run(["$rootScope","$compile","$controller","$http","$templateCache","cvOptions",function(a,b,c,d,e,f){console.debug("Bootstrapping CubesViewer Studio.");var g={container:null,user:null,showAbout:!0};$.extend(g,f),$.extend(f,g),d.get("studio/studio.html",{cache:e}).then(function(a){var c=angular.element(f.container).scope();c.$new();$(f.container).html(a.data),b($(f.container).contents())(c)})}]),cubesviewer.studio={_configure:function(a){cubesviewer._configure(a)},init:function(a){this._configure(a),angular.element(document).ready(function(){angular.bootstrap(a.container,["cv.studio"])})}},angular.module("cv").run(["$templateCache",function(a){"use strict";a.put("alerts/alerts.html",'<div class="cv-bootstrap cv-alerts">\n    <div style="min-width: 260px; width: 300px; z-index: 1000;" >\n\n        {{# cv.alerts }}\n        <div class="alert alert-warning alert-dismissable" style="margin-bottom: 5px;">\n            <button type="button" class="close" data-dismiss="alert" aria-hidden="true"><i class="fa fa-fw fa-close"></i></button>\n            <i class="fa fa-bell"></i> {{ text }}\n        </div>\n        {{/ cv.alerts }}\n\n    </div>\n</div>\n'),a.put("studio/about.html",'<div class="modal fade" id="cvAboutModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true"><i class="fa fa-fw fa-close"></i></span></button>\n        <h4 class="modal-title" id="myModalLabel"><i class="fa fa-cube"></i> CubesViewer</h4>\n      </div>\n      <div class="modal-body">\n\n            <p><a href="http://jjmontesl.github.io/cubesviewer/">CubesViewer</a> is a visual, web-based tool application for exploring and analyzing\n            OLAP databases served by the <a href="http://cubes.databrewery.org/">Cubes OLAP Framework</a>.</p>\n            <hr />\n\n            <p>Version {{ cvVersion }}<br />\n            <a href="https://github.com/jjmontesl/cubesviewer/" target="_blank">https://github.com/jjmontesl/cubesviewer/</a></p>\n\n            <p>by Jos Juan Montes and others (see AUTHORS)<br />\n            2012 - 2016</p>\n\n            <p>\n            <a href="">LICENSE</a>\n            </p>\n\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n\n\n'),a.put("studio/panel.html",'<div class="cv-bootstrap cv-gui-viewcontainer" ng-controller="CubesViewerStudioViewController">\n\n    <div class="panel panel-primary">\n        <div class="panel-heading" style="ver">\n\n            <button type="button" ng-click="studioViewsService.closeView(view)" class="btn btn-danger btn-xs" style="margin-right: 10px;"><i class="fa fa-fw fa-close"></i></button>\n\n            <button type="button" ng-click="studioViewsService.toggleCollapseView(view)" class="btn btn-primary btn-xs" style="margin-right: 10px;"><i class="fa fa-fw" ng-class="{\'fa-caret-up\': !view.collapsed, \'fa-caret-down\': view.collapsed }"></i></button>\n\n            <span class="cv-gui-title">{{ view.params.name }}</span>\n\n            <span class="badge badge-primary pull-right cv-gui-container-state" style="margin-right: 10px;">Test</span>\n\n        </div>\n        <div class="panel-body" ng-hide="view.collapsed">\n            <div class="cv-gui-viewcontent">\n\n                <div cv-view-cube view="view"></div>\n\n            </div>\n        </div>\n    </div>\n\n</div>\n'),a.put("studio/studio.html",'<div class="cv-bootstrap" ng-controller="CubesViewerStudioController">\n\n    <div class="cv-gui-panel" >\n\n        <div class="dropdown m-b" style="display: inline-block;">\n          <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown" data-submenu>\n            <i class="fa fa-fw fa-cube"></i> Cubes <span class="caret"></span>\n          </button>\n\n          <ul class="dropdown-menu cv-gui-cubeslist-menu">\n\n            <li ng-repeat="cube in cubesService.cubesserver._cube_list | orderBy:\'label\'" ng-click="studioViewsService.addViewCube(cube.name)"><a>{{ cube.label }}</a></li>\n\n          </ul>\n        </div>\n\n\n        <div class="dropdown m-b" style="display: inline-block;">\n          <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown" data-submenu>\n            <i class="fa fa-fw fa-wrench"></i> Tools <span class="caret"></span>\n          </button>\n\n          <ul class="dropdown-menu">\n\n                <li><a tabindex="0"><i class="fa fa-fw fa-code"></i> Add view from JSON...</a></li>\n\n                <div class="divider" ng-if="cvOptions.showAbout"></div>\n\n                <li class=""><a><i class="fa fa-fw fa-question"></i> User Guide</a></li>\n                <li class="" ng-if="cvOptions.showAbout"><a data-toggle="modal" data-target="#cvAboutModal"><i class="fa fa-fw fa-info"></i> About CubesViewer...</a></li>\n\n            </ul>\n        </div>\n\n        <div ng-include="\'studio/about.html\'"></div>\n\n    </div>\n\n    <div class="cv-gui-workspace">\n\n        <div ng-repeat="studioView in studioViewsService.views">\n            <div cv-studio-view view="studioView"></div>\n        </div>\n\n    </div>\n\n</div>\n\n\n'),a.put("views/cube/chart/chart.html",'<div ng-controller="CubesViewerViewsCubeChartController">\n\n    <div ng-if="">\n        <h3><i class="fa fa-fw fa-clock-o"></i> Series chart</h3>\n    </div>\n\n\n\n</div>\n'),a.put("views/cube/cube-menu-drilldown.html",'  <button class="btn btn-primary btn-sm dropdown-toggle drilldownbutton" ng-disabled="view.params.mode == \'facts\'" type="button" data-toggle="dropdown" data-submenu>\n    <i class="fa fa-fw fa-arrow-down"></i> <span class="hidden-xs">Drilldown</span> <span class="caret"></span>\n  </button>\n\n  <ul class="dropdown-menu dropdown-menu-right cv-view-menu-drilldown">\n\n      <!-- if ((grayout_drill) && ((($.grep(view.params.drilldown, function(ed) { return ed == dimension.name; })).length > 0))) { -->\n      <li on-repeat-done ng-repeat-start="dimension in view.cube.dimensions" ng-if="dimension.levels.length == 1" ng-click="selectDrill(dimension.name, true);">\n        <a href="">{{ dimension.label }}</a>\n      </li>\n      <li ng-repeat-end ng-if="dimension.levels.length != 1" class="dropdown-submenu">\n        <a tabindex="0">{{ dimension.label }}</a>\n\n        <ul ng-if="dimension.hierarchies_count() != 1" class="dropdown-menu">\n            <li ng-repeat="(hikey,hi) in dimension.hierarchies" class="dropdown-submenu">\n                <a tabindex="0" href="" onclick="return false;">{{ hi.label }}</a>\n                <ul class="dropdown-menu">\n                    <li ng-repeat="level in hi.levels" ng-click="selectDrill(dimension.name + \'@\' + hi.name + \':\' + level.name, true)"><a href="">{{ level.label }}</a></li>\n                </ul>\n            </li>\n        </ul>\n\n        <ul ng-if="dimension.hierarchies_count() == 1" class="dropdown-menu">\n            <li ng-repeat="level in dimension.default_hierarchy().levels" ng-click="selectDrill(dimension.name + \':\' + level.name, true)"><a href="">{{ level.label }}</a></li>\n        </ul>\n\n      </li>\n\n      <div class="divider"></div>\n      <li ng-click="selectDrill(null)"><a href=""><i class="fa fa-fw fa-close"></i> None</a></li>\n\n  </ul>\n\n'),
a.put("views/cube/cube-menu-filter.html",'  <button class="btn btn-primary btn-sm dropdown-toggle cutbutton" type="button" data-toggle="dropdown" data-submenu>\n    <i class="fa fa-fw fa-filter"></i> <span class="hidden-xs">Filter</span> <span class="caret"></span>\n  </button>\n\n  <ul class="dropdown-menu dropdown-menu-right cv-view-menu cv-view-menu-cut">\n\n    <li ng-click="filterSelected()"><a href=""><i class="fa fa-fw fa-filter"></i> Filter selected rows</a></li>\n    <div class="divider"></div>\n\n    <li class="dropdown-submenu">\n        <a tabindex="0"><i class="fa fa-fw fa-bars"></i> Dimension filter</a>\n        <ul class="dropdown-menu">\n\n          <li on-repeat-done ng-repeat-start="dimension in view.cube.dimensions" ng-if="dimension.levels.length == 1" ng-click="showDimensionFilter(dimension.name);">\n            <a href="">{{ dimension.label }}</a>\n          </li>\n          <li ng-repeat-end ng-if="dimension.levels.length != 1" class="dropdown-submenu">\n            <a tabindex="0">{{ dimension.label }}</a>\n\n            <ul ng-if="dimension.hierarchies_count() != 1" class="dropdown-menu">\n                <li ng-repeat="(hikey,hi) in dimension.hierarchies" class="dropdown-submenu">\n                    <a tabindex="0" href="" onclick="return false;">{{ hi.label }}</a>\n                    <ul class="dropdown-menu">\n                        <!-- ng-click="selectDrill(dimension.name + \'@\' + hi.name + \':\' + level.name, true)"  -->\n                        <li ng-repeat="level in hi.levels" ng-click="showDimensionFilter(dimension.name + \'@\' + hi.name + \':\' + level.name )"><a href="">{{ level.label }}</a></li>\n                    </ul>\n                </li>\n            </ul>\n\n            <ul ng-if="dimension.hierarchies_count() == 1" class="dropdown-menu">\n                <!--  selectDrill(dimension.name + \':\' + level.name, true) -->\n                <li ng-repeat="level in dimension.default_hierarchy().levels" ng-click="showDimensionFilter(level);"><a href="">{{ level.label }}</a></li>\n            </ul>\n\n          </li>\n\n        </ul>\n    </li>\n\n    <!--\n    // Events\n    $(view.container).find(\'.cv-view-show-dimensionfilter\').click( function() {\n        cubesviewer.views.cube.dimensionfilter.drawDimensionFilter(view, $(this).attr(\'data-dimension\'));\n        return false;\n    });\n     -->\n\n    <div class="divider"></div>\n    <li><a href=""><i class="fa fa-fw fa-trash"></i> Clear filters</a></li>\n\n  </ul>\n'),a.put("views/cube/cube-menu-panel.html",'  <button class="btn btn-primary btn-sm dropdown-toggle" type="button" data-toggle="dropdown" data-submenu>\n    <i class="fa fa-fw fa-file"></i> <span class="hidden-xs">Panel</span> <span class="caret"></span>\n  </button>\n\n  <ul class="dropdown-menu dropdown-menu-right cv-view-menu cv-view-menu-view">\n\n    <li><a><i class="fa fa-fw fa-save"></i> Save</a></li>\n    <li><a><i class="fa fa-fw fa-trash-o"></i> Delete...</a></li>\n    <li><a><i class="fa fa-fw fa-pencil"></i> Rename...</a></li>\n    <div class="divider"></div>\n    <li><a><i class="fa fa-fw fa-share"></i> Share...</a></li>\n    <li><a><i class="fa fa-fw fa-clone"></i> Clone</a></li>\n    <div class="divider"></div>\n    <li><a><i class="fa fa-fw fa-code"></i> Serialize...</a></li>\n    <div class="divider"></div>\n    <li><a><i class="fa fa-fw fa-close"></i> Close</a></li>\n  </ul>\n'),a.put("views/cube/cube-menu-view.html",'  <button class="btn btn-primary btn-sm dropdown-toggle" type="button" data-toggle="dropdown" data-submenu>\n    <i class="fa fa-fw fa-cogs"></i> <span class="hidden-xs">View</span> <span class="caret"></span>\n  </button>\n\n  <ul class="dropdown-menu dropdown-menu-right cv-view-menu cv-view-menu-view">\n\n    <li class="dropdown-submenu">\n        <a tabindex="0" ><i class="fa fa-fw fa-area-chart"></i> Chart type</a>\n        <ul class="dropdown-menu">\n          <li><a href=""><i class="fa fa-fw fa-pie-chart"></i> Pie</a></li>\n          <li><a href=""><i class="fa fa-fw fa-bar-chart"></i> Bars Vertical</a></li>\n          <li><a href=""><i class="fa fa-fw fa-line-chart"></i> Lines</a></li>\n          <li><a href=""><i class="fa fa-fw fa-area-chart"></i> Areas</a></li>\n          <li><a href=""><i class="fa fa-fw fa-bullseye"></i> Radar</a></li>\n\n          <div class="divider"></div>\n\n          <li><a href=""><i class="fa fa-fw fa-sun-o"></i> Sunburst</a></li>\n          <li><a href=""><i class="fa fa-fw fa-dot-circle-o"></i> Bubbles</a></li>\n\n          <div class="divider"></div>\n\n          <li><a href=""><i class="fa fa-fw fa-globe"></i> Map</a></li>\n        </ul>\n    </li>\n\n    <div class="divider"></div>\n\n    <li class="dropdown-submenu">\n        <a tabindex="0"><i class="fa fa-fw fa-long-arrow-right"></i> Horizontal dimension</a>\n        <ul class="dropdown-menu">\n\n          <li on-repeat-done ng-repeat-start="dimension in view.cube.dimensions" ng-if="dimension.levels.length == 1" ng-click="selectXAxis(dimension.name)">\n            <a href="">{{ dimension.label }}</a>\n          </li>\n          <li ng-repeat-end ng-if="dimension.levels.length != 1" class="dropdown-submenu">\n            <a tabindex="0">{{ dimension.label }}</a>\n\n            <ul ng-if="dimension.hierarchies_count() != 1" class="dropdown-menu">\n                <li ng-repeat="(hikey,hi) in dimension.hierarchies" class="dropdown-submenu">\n                    <a tabindex="0" href="" onclick="return false;">{{ hi.label }}</a>\n                    <ul class="dropdown-menu">\n                        <!-- ng-click="selectDrill(dimension.name + \'@\' + hi.name + \':\' + level.name, true)"  -->\n                        <li ng-repeat="level in hi.levels" ng-click="selectXAxis(dimension.name + \'@\' + hi.name + \':\' + level.name )"><a href="">{{ level.label }}</a></li>\n                    </ul>\n                </li>\n            </ul>\n\n            <ul ng-if="dimension.hierarchies_count() == 1" class="dropdown-menu">\n                <!--  selectDrill(dimension.name + \':\' + level.name, true) -->\n                <li ng-repeat="level in dimension.default_hierarchy().levels" ng-click="selectXAxis(level);"><a href="">{{ level.label }}</a></li>\n            </ul>\n\n          </li>\n\n          <div class="divider"></div>\n\n          <li ng-click="selectXAxis(null);"><a href=""><i class="fa fa-fw fa-close"></i> None</a></li>\n\n        </ul>\n    </li>\n\n    <li class="dropdown-submenu">\n        <a tabindex="0"><i class="fa fa-fw fa-crosshairs"></i> Measure</a>\n        <ul class="dropdown-menu">\n\n          <li ng-repeat="measure in view.cube.measures" ng-if="view.cube.measureAggregates(measure.name).length > 0" class="dropdown-submenu">\n            <a href="">{{ measure.label }}</a>\n            <ul class="dropdown-menu">\n                <li ng-repeat="aggregate in view.cube.measureAggregates(measure.name)" >\n                    <a href="" ng-click="selectMeasure(aggregate.ref)">{{ aggregate.label }}</a>\n                </li>\n            </ul>\n          </li>\n\n          <div class="divider" ng-if="view.cube.measureAggregates(null).length > 0"></div>\n          <li ng-repeat="aggregate in view.cube.measureAggregates(null)" ng-if="view.cube.measureAggregates(null).length > 0" >\n            <a href="" ng-click="selectMeasure(aggregate.ref)">{{ aggregate.label }}</a>\n          </li>\n\n        </ul>\n    </li>\n\n    <div class="divider"></div>\n\n    <li><a><i class="fa fa-fw fa-table"></i> Export table</a></li>\n    <li><a><i class="fa fa-fw fa-th"></i> Export facts</a></li>\n\n  </ul>\n'),a.put("views/cube/cube.html",'<div class="cv-view-panel" ng-controller="CubesViewerViewsCubeController">\n\n    <div class="cv-view-viewmenu">\n\n        <div class="panel panel-primary pull-right" style="padding: 3px;">\n\n            <div class="btn-group" role="group" aria-label="...">\n              <button type="button" ng-click="setViewMode(\'explore\')" ng-class="{\'active\': view.params.mode == \'explore\'}" class="btn btn-primary btn-sm explorebutton" title="Explore"><i class="fa fa-fw fa-arrow-circle-down"></i></button>\n              <button type="button" ng-click="setViewMode(\'facts\')" ng-class="{\'active\': view.params.mode == \'facts\'}" class="btn btn-primary btn-sm " title="Facts"><i class="fa fa-fw fa-th"></i></button>\n              <button type="button" ng-click="setViewMode(\'series\')" ng-class="{\'active\': view.params.mode == \'series\'}" class="btn btn-primary btn-sm " title="Series"><i class="fa fa-fw fa-clock-o"></i></button>\n              <button type="button" ng-click="setViewMode(\'chart\')" ng-class="{\'active\': view.params.mode == \'chart\'}" class="btn btn-primary btn-sm " title="Charts"><i class="fa fa-fw fa-area-chart"></i></button>\n            </div>\n\n            <div ng-include="\'views/cube/cube-menu-drilldown.html\'" class="dropdown m-b" style="display: inline-block; margin-left: 5px;"></div>\n\n            <div ng-include="\'views/cube/cube-menu-filter.html\'" class="dropdown m-b" style="display: inline-block; margin-left: 2px;"></div>\n\n            <div ng-include="\'views/cube/cube-menu-view.html\'" class="dropdown m-b" style="display: inline-block; margin-left: 5px;"></div>\n\n            <div ng-include="\'views/cube/cube-menu-panel.html\'" class="dropdown m-b" style="display: inline-block; margin-left: 5px;"></div>\n\n        </div>\n\n    </div>\n\n    <div class="cv-view-viewinfo">\n        <div>\n            <div class="cv-view-viewinfo-drill">\n\n                <div class="label label-secondary cv-infopiece cv-view-viewinfo-cubename" style="color: white; background-color: black;">\n                    <span><i class="fa fa-fw fa-cube"></i> <b>Cube:</b> {{ view.cube.label }}</span>\n                    <button type="button" class="btn btn-info btn-xs" style="visibility: hidden;"><i class="fa fa-fw fa-info"></i></button>\n                </div>\n\n                <div ng-repeat="drilldown in view.params.drilldown" class="label label-secondary cv-infopiece cv-view-viewinfo-drill" style="color: black; background-color: #ccffcc;">\n                    <span><i class="fa fa-fw fa-arrow-down"></i> <b>Drilldown:</b> {{ view.cube.cvdim_parts(drilldown).label }}</span>\n                    <button type="button" ng-click="showDimensionFilter(drilldown)" class="btn btn-secondary btn-xs" style="margin-left: 3px;"><i class="fa fa-fw fa-search"></i></button>\n                    <button type="button" ng-click="selectDrill(drilldown, \'\')" class="btn btn-danger btn-xs" style="margin-left: 1px;"><i class="fa fa-fw fa-trash"></i></button>\n                </div>\n\n            </div>\n            <div class="cv-view-viewinfo-cut">\n                <!--\n                    var dimensionString = $(this).parents(\'.cv-view-infopiece-cut\').first().attr(\'data-dimension\');\n                    var parts = view.cube.cvdim_parts(dimensionString);\n                    var depth = $(this).parents(\'.cv-view-infopiece-cut\').first().attr(\'data-value\').split(\';\')[0].split(",").length;\n                    cubesviewer.views.cube.dimensionfilter.drawDimensionFilter(view, dimensionString + ":" + parts.hierarchy.levels[depth - 1] );\n                 -->\n                <div ng-repeat="cut in view.params.cuts" ng-init="dimparts = view.cube.cvdim_parts(cut.dimension.replace(\':\',  \'@\')); equality = cut.invert ? \' &ne; \' : \' = \';" class="label label-secondary cv-infopiece cv-view-viewinfo-cut" style="color: black; background-color: #ffcccc;">\n                    <span style="max-width: 480px;"><i class="fa fa-fw fa-filter"></i> <b>Filter:</b> {{ dimparts.label }} {{ equality }} <span title="{{ cut.value }}">{{ cut.value }}</span></span>\n                    <button type="button" ng-click="showDimensionFilter(cut.dimension)" class="btn btn-secondary btn-xs" style="margin-left: 3px;"><i class="fa fa-fw fa-search"></i></button>\n                    <button type="button" ng-click="selectCut(cut.dimension, \'\', cut.invert)" class="btn btn-danger btn-xs" style="margin-left: 1px;"><i class="fa fa-fw fa-trash"></i></button>\n                </div>\n            </div>\n            <div class="cv-view-viewinfo-extra">\n\n                <div ng-if="view.params.mode == \'series\' || view.params.mode == \'chart\'" class="label label-secondary cv-infopiece cv-view-viewinfo-extra" style="color: black; background-color: #ccccff;">\n                    <span style="max-width: 350px;"><i class="fa fa-fw fa-bullseye"></i> <b>Measure:</b> {{ (view.params.yaxis != null) ? view.params.yaxis : "None" }}</span>\n                    <button type="button" class="btn btn-info btn-xs" style="visibility: hidden;"><i class="fa fa-fw fa-info"></i></button>\n                </div>\n\n                <div ng-if="view.params.mode == \'series\' || view.params.mode == \'chart\'" class="label label-secondary cv-infopiece cv-view-viewinfo-extra" style="color: black; background-color: #ccddff;">\n                    <span style="max-width: 350px;"><i class="fa fa-fw fa-long-arrow-right"></i> <b>Horizontal dimension:</b> {{ (view.params.xaxis != null) ? view.cube.cvdim_parts(view.params.xaxis).label : "None" }}</span>\n                    <button type="button" class="btn btn-info btn-xs" style="visibility: hidden;"><i class="fa fa-fw fa-info"></i></button>\n                </div>\n\n            </div>\n        </div>\n    </div>\n    <div class="clearfix"></div>\n\n    <div class="cv-view-viewdialogs">\n        <div ng-if="view.dimensionFilter" ng-include="\'views/cube/filter/dimension.html\'"></div>\n    </div>\n\n    <div class="cv-view-viewdata">\n\n        <div ng-if="view.params.mode == \'explore\'" ng-include="\'views/cube/explore/explore.html\'"></div>\n        <div ng-if="view.params.mode == \'facts\'" ng-include="\'views/cube/facts/facts.html\'"></div>\n        <div ng-if="view.params.mode == \'series\'" ng-include="\'views/cube/series/series.html\'"></div>\n        <div ng-if="view.params.mode == \'chart\'" ng-include="\'views/cube/explore/chart.html\'"></div>\n\n    </div>\n    <div class="clearfix"></div>\n\n    <div class="cv-view-viewfooter"></div>\n\n</div>\n'),a.put("views/cube/explore/explore.html",'<div ng-controller="CubesViewerViewsCubeExploreController">\n\n    <!-- ($(view.container).find(\'.cv-view-viewdata\').children().size() == 0)  -->\n    <h3><i class="fa fa-fw fa-arrow-circle-down"></i> Aggregated Data</h3>\n\n    <div ui-grid="gridOptions"\n         ui-grid-resize-columns ui-grid-move-columns ui-grid-selection ui-grid-auto-resize\n         ui-grid-pagination ui-grid-pinning\n         style="width: 100%;" ng-style="{height: ((gridOptions.data.length < 15 ? gridOptions.data.length : 15) * 24) + 44 + 30 + \'px\'}">\n    </div>\n    <div style="height: 30px;">&nbsp;</div>\n\n</div>\n'),a.put("views/cube/facts/facts.html",'<div ng-controller="CubesViewerViewsCubeFactsController">\n\n    <!-- ($(view.container).find(\'.cv-view-viewdata\').children().size() == 0)  -->\n    <h3><i class="fa fa-fw fa-th"></i> Facts data</h3>\n\n    <div ng-if="gridOptions.data.length > 0"\n         ui-grid="gridOptions"\n         ui-grid-resize-columns ui-grid-move-columns ui-grid-selection ui-grid-auto-resize\n         ui-grid-pagination ui-grid-pinning\n         style="width: 100%;" ng-style="{height: ((gridOptions.data.length < 15 ? gridOptions.data.length : 15) * 24) + 44 + 30 + \'px\'}">\n    </div>\n    <div ng-if="gridOptions.data.length > 0" style="height: 30px;">&nbsp;</div>\n\n    <div ng-if="gridOptions.data.length == 0">No facts are returned by the current filtering combination.</div>\n\n</div>\n'),a.put("views/cube/filter/dimension.html",'<div ng-controller="CubesViewerViewsCubeFilterDimensionController">\n\n    <div class="panel panel-default panel-outline" style="border-color: #ffcccc;">\n        <div class="panel-heading clearfix" style="border-color: #ffcccc;">\n            <button class="btn btn-xs btn-danger pull-right" ng-click="closeDimensionFilter()"><i class="fa fa-fw fa-close"></i></button>\n            <h4 style="margin: 2px 0px 0px 0px;"><i class="fa fa-fw fa-filter"></i> Dimension filter: <b>{{ parts.label }}</b></h4>\n        </div>\n        <div class="panel-body">\n\n          <div class="row">\n            <div class="col-xs-12">\n            <form class="form-inline" >\n\n              <div class="form-group has-feedback">\n                <!-- <label for="search">Search:</label>  -->\n                <input type="text" class="form-control" placeholder="Search..." style="width: 16em;">\n                <i class="fa fa-fw fa-times-circle form-control-feedback"></i>\n              </div>\n\n              <div class="form-group">\n\n                <div class="input-group" style="margin-left: 10px;">\n                  <span class="input-group-btn">\n                    <button class="btn btn-default" type="button" title="Select all"><i class="fa fa-fw fa-check-square-o"></i></button>\n                  </span>\n                  <span class="input-group-btn">\n                    <button class="btn btn-default" type="button" title="Select none"><i class="fa fa-fw fa-square-o"></i></button>\n                  </span>\n                </div>\n                <!-- <label for="search">Search:</label>  -->\n              </div>\n\n              <button class="btn btn-default" type="button" title="Drilldown this" ng-click="selectDrill(view.dimensionFilter, true)"><i class="fa fa-fw fa-arrow-down"></i></button>\n\n              <div class="form-group">\n\n                <div class="input-group" style="margin-left: 10px;">\n                  <span class="input-group-btn">\n                    <button class="btn btn-default active" type="button"><b>=</b> Select</button>\n                  </span>\n                  <span class="input-group-btn">\n                    <button class="btn btn-default" type="button"><b>&ne;</b> Invert</button>\n                  </span>\n                </div>\n                <!-- <label for="search">Search:</label>  -->\n              </div>\n\n              <button class="btn btn-success" type="button"><i class="fa fa-fw fa-filter"></i> Apply</button>\n            </form>\n            </div>\n        </div>\n\n            <div class="row" style="margin-top: 5px;">\n\n                <div class="col-xs-6">\n                    <span ng-show="loadingDimensionValues" ><i class="fa fa-circle-o-notch fa-spin fa-fw margin-bottom"></i> Loading...</span>\n                    <div class="panel panel-default panel-outline" style="margin-bottom: 0px;"><div class="panel-body" style="max-height: 180px; overflow-y: auto; overflow-x: hidden;">\n                        <div ng-repeat="val in dimensionValues" style="overflow-x: hidden; text-overflow: ellipsis; white-space: nowrap;">\n                            <input type="checkbox" value="{{ val.value }}" style="vertical-align: bottom;" />\n                            <span>{{ val.label }}</span>\n                        </div>\n                    </div></div>\n\n                </div>\n\n            </div>\n\n        </div>\n    </div>\n\n</div>\n'),a.put("views/cube/series/series.html",'<div ng-controller="CubesViewerViewsCubeSeriesController">\n\n    <!-- ($(view.container).find(\'.cv-view-viewdata\').children().size() == 0)  -->\n    <h3><i class="fa fa-fw fa-clock-o"></i> Series table</h3>\n\n    <div ng-if="gridOptions.data.length > 0"\n         ui-grid="gridOptions"\n         ui-grid-resize-columns ui-grid-move-columns ui-grid-selection ui-grid-auto-resize\n         ui-grid-pagination ui-grid-pinning\n         style="width: 100%;" ng-style="{height: ((gridOptions.data.length < 15 ? gridOptions.data.length : 15) * 24) + 44 + 30 + \'px\'}">\n    </div>\n    <div ng-if="gridOptions.data.length > 0" style="height: 30px;">&nbsp;</div>\n\n    <div ng-if="view.params.yaxis == null" class="alert alert-info">\n        Cannot present series table: no <b>measure</b> has been selected.\n    </div>\n\n    <div ng-if="view.params.yaxis != null && gridOptions.data.length == 0" class="alert alert-info">\n        Cannot present series table: no rows are returned by the current filtering, horizontal dimension, and drilldown combination.\n    </div>\n\n</div>\n')}]);